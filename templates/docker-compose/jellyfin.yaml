version: '3.9'
name: jellyfin
# Jellyfin stack

# Page: https://jellyfin.org/
# Dckr: https://jellyfin.org/docs/general/installation/container#using-docker-compose
# Code: https://github.com/jellyfin/jellyfin

# Jellyfin is the volunteer-built media solution that puts you in control of
# your media. Stream to any device from your own server, with no strings
# attached. Your media, your server, your way.

services:

  app:
    container_name: jellyfin
    image: jellyfin/jellyfin
    network_mode: host # No need to expose port 8096 due to this
    volumes:
      - /etc/jellyfin:/config
      - /srv/jellyfin/cache:/cache
      - /media/level1:/media
    restart: unless-stopped
    healthcheck:
      test: "curl -f http://localhost:8096/ || exit 1"
    # Optional - alternative address used for autodiscovery
    environment:
      - JELLYFIN_PublishedServerUrl
    # Optional - may be necessary for docker healthcheck to pass if running in
    #            host network mode
    extra_hosts:
      - "host.docker.internal:host-gateway"
