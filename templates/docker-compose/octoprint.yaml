version: '3.9'
# OctoPrint stack
# Page: https://octoprint.org/
# Code: https://github.com/OctoPrint/OctoPrint
# OctoPrint provides a snappy web interface for controlling consumer
# 3D printers. It is Free Software and released under
# the GNU Affero General Public License V3.

services:

  app:
    image: octoprint/octoprint
    restart: unless-stopped
    ports:
      - 30984:80
    # devices:
    # use `python -m serial.tools.miniterm` to see what the name is of the printer, this requires pyserial
    #  - /dev/ttyACM0:/dev/ttyACM0
    #  - /dev/video0:/dev/video0
    volumes:
     - octoprint:/octoprint
    environment:
      - ENABLE_MJPG_STREAMER
  
  config-editor:
    image: linuxserver/code-server
    ports:
      - 32493:8443
    depends_on:
      - octoprint
    restart: unless-stopped
    environment:
      - PUID=0
      - PGID=0
      - TZ=Europe/Warsaw
    volumes:
      - octoprint:/octoprint

volumes:
  octoprint: